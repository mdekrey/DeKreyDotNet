---
import { Picture } from 'astro:assets';

import fullUrl from '@/images/full.jpg';
---

<div
	class="post-blur w-full md:h-[60vmin] mx-auto max-w-screen-md"
	style="clip-path:inset(-100px 0 0 0)"
	id="intro-fixed-container"
>
	<div
		class={'flex flex-col items-center md:flex-row md:items-start md:justify-center max-h-screen mx-auto max-w-screen-md md:px-8 md:fixed top-16'}
		id="intro-fixed-contents"
	>
		<div
			class="group flex flex-col flex-shrink-0 mt-8 md:mt-[15vmin] md:mb-[10vmin]"
		>
			<h1 class="text-2xl md:text-left font-bold">
				Hey, <br />
				<span class="text-purple-700 text-4xl"> I&rsquo;m Matt DeKrey!</span>
			</h1>
			<p class="text-xs">MAT deh-KRAY</p>
			<p class="text-xs">/m√¶t d&#x026A;&#x02c8;kre&#x026A;/</p>
			<p class="text-xs">he/him</p>

			<p class="text-sm">
				<!-- <a href="https://principlestudios.com"> -->
				<span class="block">
					<svg
						stroke="currentColor"
						fill="currentColor"
						stroke-width="0"
						height="1em"
						width="1em"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 24 24"
						class="text-red-700 text-[36px] inline-block"
					>
						<path fill="none" d="M0 0h24v24H0z"></path>
						<path
							d="M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zM7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"
						></path>
					</svg>{' '}Not available for contracting
				</span>
				<!-- <span class="block md:hidden md:group-hover:block">
					<svg
						stroke="currentColor"
						fill="currentColor"
						stroke-width="0"
						height="1em"
						width="1em"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 24 24"
						class="text-green-700 text-[36px] inline-block"
					>
						<path fill="none" d="M0 0h24v24H0z"></path>
						<path
							d="M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"
						></path>
					</svg>
					{' '}
					But <span class="underline">Principle Studios</span> is!
				</span>
			</a> -->
			</p>
		</div>
		<div
			class="max-w-screen md:flex-shrink-default h-[100vmin] w-[100vmin] md:h-[60vmin] md:w-[80vmin] md:self-end relative"
		>
			<Picture
				id="intro-photo"
				src={fullUrl}
				class="object-contain h-full w-full mx-auto mt-auto"
				alt="A photo of Matt DeKrey, smiling and wearing an aloha-style shirt. The print of the shirt is a pattern with Tux wearing an floral aloha-style shirt."
				formats={['webp', 'jpeg']}
				sizes="(min-width: 768px) 540px, (min-width: 640px) 577px, 480px"
				widths={[540, 577, 480]}
			/>
		</div>
	</div>
</div>
<style>
	.post-blur + :global(*:before) {
		content: '';
		@apply inset-x-0;
		position: absolute;
		bottom: calc(100% - 1px);

		background-image: linear-gradient(
			2.5deg,
			white,
			white,
			white,
			white,
			rgba(255, 255, 255, 0.89),
			rgba(255, 255, 255, 0.67),
			rgba(255, 255, 255, 0.22),
			transparent,
			transparent,
			transparent
		);
		background-repeat: no-repeat;
		padding-top: min(10%, 10vh);
	}
</style>
<script>
	const container = document.getElementById('intro-fixed-container')!;
	const contents = document.getElementById('intro-fixed-contents')!;
	const photo = document.getElementById('intro-photo')!;
	function updateHeight() {
		container.style.height = `${contents?.getBoundingClientRect().height}px`;
	}
	updateHeight();
	contents.style.position = 'fixed';
	addEventListener('resize', updateHeight);
	photo.addEventListener('load', updateHeight);
</script>
